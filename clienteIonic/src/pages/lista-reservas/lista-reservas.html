<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>
      Reservas
    </ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <div padding>
    <ion-segment [(ngModel)]="tipo">
      <ion-segment-button value="Reserva">
        Reservas
      </ion-segment-button>

      <ion-segment-button value="Entregado" (click)="getListReserve('aceptado')" >
        Aceptados
      </ion-segment-button>
    </ion-segment>
  </div>

  <div>
    <ion-searchbar (ionInput)="buscar($event)"></ion-searchbar>
  </div><br>

  <div [ngSwitch]="tipo">
    <ion-list *ngSwitchCase="'Reserva'">

      <ion-item *ngFor="let reserve of reservationsList">
        <ion-thumbnail item-start>
          <img [src]="reserve.producto.foto.miniatura" />
        </ion-thumbnail>

        <ion-col>
          <ion-row>
            <h2><b>Negocio: {{reserve.negocio.nombre}}</b></h2>
          </ion-row>
          <ion-row>
            <h4><b>Producto: </b>{{reserve.producto.nombre}}</h4>
          </ion-row>
          <ion-row>
            <h4><b>Fecha Venc.: </b>{{reserve.tiempo.fechalimite | date: 'dd-MM-yyyy'}}</h4>
          </ion-row>
          <ion-row>
            <h4><b>Precio Unitario: </b>{{reserve.precioactual}} Bs.</h4>
          </ion-row>
          <ion-row>
            <h4><b>Cantidad: </b>{{reserve.cantidad}} Bs.</h4>
          </ion-row>
          <ion-row>
            <ion-col>
              <button ion-button clear small color="default" icon-start>
                  {{reserve.precioactual * reserve.cantidad}} Bs.
              </button>
            </ion-col>

            <ion-col *ngIf="reserve.estado=='espera'" >
              <button ion-button small color="default"> esperando confirmacion</button>
            </ion-col>
            <ion-col *ngIf="reserve.estado=='rechazado'" >
              <button ion-button small color="default"> Rechazado</button>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-item>

    </ion-list>

    <ion-list *ngSwitchCase="'Entregado'">

      <ion-item *ngFor="let reserve of reservationsListCompleted">
          <ion-thumbnail item-start>
            <img [src]="reserve.producto.foto.miniatura" />
          </ion-thumbnail>
  
          <ion-col>
            <ion-row>
              <h2><b>Negocio: {{reserve.negocio.nombre}}</b></h2>
            </ion-row>
            <ion-row>
              <h4><b>Producto: </b>{{reserve.producto.nombre}}</h4>
            </ion-row>
            <ion-row>
              <h4><b>Fecha Entrega: </b>{{reserve.tiempo.fechareserva | date: 'dd-MM-yyyy'}}</h4>
            </ion-row>
            <ion-row>
              <h4><b>Precio Unitario: </b>{{reserve.precioactual}} Bs.</h4>
            </ion-row>
            <ion-row>
              <h4><b>Cantidad: </b>{{reserve.cantidad}} Bs.</h4>
            </ion-row>
            <ion-row>
              <ion-col>
                <button ion-button clear small color="default" icon-start>
                    {{reserve.precioactual * reserve.cantidad}} Bs.
                </button>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-item>

    </ion-list>

  </div>

</ion-content>
